# Добавление элементов в контент страницы

Как можно сделать страницу галереи?

Можно создать для нее отдельный шаблон, как это часто делают.

Но что если вам потом понадобится на одной странице и фотогалерею и видеогалерею? Делать новый шаблон?



## Как обойтись минимумом шаблонов?

Для этого сделайте один общий шаблон. Например, index.php. С текстом (содержимым) страницы.

И вот это содержимое страницы вы легко сможете менять:

* Для типа страницы (товар или просто текстовая)
* Для адреса (contacts, blog)

А помощью шорткодов вы можете на разные страницы в разные места вставлять разные блоки. Гибко конструируя сайт.

## 1. Как поймать контент

Чтобы поменять содержимое страницы, вам надо его поймать :)

### Контент любой страницы

```php
wdpro_on_content(

    // Каллбэк, который обрабатывает контент
    // $content - контент страницы
    // $page - объект самой страницы
    function ($content, $page) {

        // Обработка контента
        $content = '...';

        return $content;
    },

    // Порядок обработки
    // Чтобы одну обработку контента
    // можно было сделать перед другой
    10
);
```



### Контент страницы определенного типа

Вы можете использовать метод страницы getCard. Подробнее об этом в инструкции про сущности.

А еще можете в контроллере с помощью функции `wdpro_on_content_type`:

```php
public static function runSite()
{
    wdpro_on_content_type(

        // Тип страницы
        Entity::getType(),

        // Каллбэк, который обрабатывает контент
        // $content - контент страницы
        // $page - объект самой страницы
        function ($content, $page) {

            // Обработка контента
            $content = '...';

            return $content;
        },

        // Порядок обработки
        // Чтобы одну обработку контента
        // можно было сделать перед другой
        10
    );
}
```



### Контент страницы по адресу

```php
public static function runSite()
{
    wdpro_on_content_uri(

        // Адрес страницы
        'contacts',

		// Каллбэк, который обрабатывает контент
        // $content - контент страницы
        // $page - объект самой страницы
        function ($content, $page) {

            // Обработка контента
            $content = '...';

            return $content;
        },

        // Порядок обработки
        // Чтобы одну обработку контента
        // можно было сделать перед другой
        10
    );
}
```



## 2. Как обрабатывать контент

То есть, вы получили контент и потом как-то его меняете:

```php
$content = '...';
```

Что тут можно сделать?

### Добавить в конец или вместо шорткода

Если в тексте страницы будет шорткод [gallery], то галерея вставится вместо него. Иначе в конец.

```php
wdpro_replace_or_append(

    // Контент страницы
    $content,

    // Шорткод
    '[gallery]',

    // Добавляемый код
    '<div>Код галереи</div>'
);
```

### Добавить в начало или вместо шорткода

Если в тексте страницы будет шорткод [gallery], то галерея вставится вместо него. Иначе в начало.

```php
wdpro_replace_or_prepend(

    // Контент страницы
    $content,

    // Шорткод
    '[gallery]',

    // Добавляемый код
    '<div>Код галереи</div>'
);
```

