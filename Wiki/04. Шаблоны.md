# Как работать с шаблонами

[![](http://img.youtube.com/vi/yD7s5x5C_r8/0.jpg)](http://www.youtube.com/watch?v=yD7s5x5C_r8 "")



В целом все как в вордпресс. Плюс некоторые штуки, которые упрощают вашу разработку.

[TOC]

## Структура файлов

### Html

В вордпресс есть стандартные шаблоны со стандартными именами файлов.

А так же вы можете сделать свой не стандартный шаблон. И потом задавать его для разных страниц вручную через админку во время редактирования страницы.

(это всё стандартные функции WordPress)

#### Стандартные шаблоны

- Основной шаблон (используется, когда не нашлось более подходящего) - index.php
- Главная страница - front-page.php
- Ошибка 404 - 404.php
- Пост в блоге - single.php
- Текстовая страница - page.php

Подробнее в [справке WordPress](https://codex.wordpress.org/Иерархия_шаблонов)

#### Детали шаблонов

- Шапка - header.php
- Подвал - footer.php
- Сайдбар (колонка сбоку) - sidebar.php

#### Как создать свой не стандартный шаблон

##### Который можно будет выбрать для каждой страницы

Для этого создайте php файл в папке темы.

И добавьте в самое его начало:

```php
<?php
/* Template Name: Название шаблона */
?>
```

##### Который можно будет задать для типа страниц

Это бывает нужно, когда структура какого-либо типа страниц существенно отличается от остальных. Например, все товары. И нужно поменять не только текст страницы. А структуру страницы в целом. Это бывает, но редко.

Для этого создайте php файл в папке темы. Напрмер, `new_template.php`.

Дальше в классе соответствующих страниц (файл Entity.php) добавьте метод:

```php
/**
 * Возвращает имя файла шаблона для данных страниц
 *
 * @return string
 */
public static function getTemplateFile() {
    return WDPRO_TEMPLATE_PATH.'new_template.php';
}
```

Затем можно в шаблон отправлять данные с помощью метода initCard объекта Entity:

```php
class Entity extends \App\BasePage {
    public function initCard()
	{
		$templateVaribles = parent::initCard();
        
        $templateVaribles['city'] = 'Санкт-Петербург';

		return $templateVaribles;
	}
}
```



### Css

Стандартные вордпрессовские стили - style.css

Вы можете вместо стандартного файла использовать Less - style.less, который автоматически компилируется в css при обновлении страницы.

### JavaScript

Вы можете создать файл script.js в корневой папке темы. Тогда он автоматически подключится к сайту.

Другие скрипты надо подключать дополнительно. О чем вы можете узнать в одной из следующих инструкций.

## Стандартные функции

### Подключение блоков

Подключение шапки (header.php) в начале шаблона

```php
<?php get_header(); ?>
```

Подключение сайдбара (sidebar.php)

```php
<?php get_sidebar(); ?>
```

Подключение футера

```php
<?php get_footer(); ?>
```

Скрипт, который подключает всякие скрипты и другие штуки, которые необходимо подключить именно перед \</body\> и именно для этого он находится в файле footer.php

```php
<?php wp_footer(); ?>
```

### Отображение элементов

Хлебные крошки

```php
<?= wdpro_the_breadcrumbs() ?>
```

Заголовок h1

```php
<?php if ( $h1 = wdpro_the_h1() ): ?>
	<h1><?= $h1 ?></h1>
<?php endif; ?>
```

Текст (содержимое страницы)

```php
<?= wdpro_the_content(); ?>
```



## Полезные константы

**WDPRO_UPLOAD_IMAGES_URL** - url папки, куда WordpressMVC загружает рисунки

**WDPRO_UPLOAD_FILES_URL** - url папки, куда WordpressMVC загружает остальные файлы

**WDPRO_TEMPLATE_PATH** - путь к папке темы

**WDPRO_TEMPLATE_URL** - url адрес темы



## Минишаблоны

Есть большие шаблоны страниц. Но часто полезно использовать небольшие шаблоны.

Например, чтобы получить html код меню. И потом этот html код добавить в текст страницы.

Как раз для этого вы можете использовать минишаблоны.



### Как создать минишаблон

Создайте в папке с темой файл, например, menu.php:

```php
<ul>
    <?foreach ($data['list'] as $item):?>
        <li>
        <a href="<?=$item['link']?>"><?=$item['text']?></a>
        </li>
    <?endforeach;?>
</ul>
```



### Как получить результат минишаблона

То есть, как получить html код минишаблона.

С помощью функции `wdpro_render_php(Файл шаблона, Данные для шаблона)`

```php
$html = wdpro_render_php(

    // Файл шаблона
    WDPRO_TEMPLATE_PATH.'menu.php',

    // Данные шаблона
    [
        'list'=>[

            [
                'link'=>'https://yandex.ru/',
                'text'=>'Яндекс',
            ],

            [
                'link'=>'https://google.com/',
                'text'=>'Google',
            ],

        ]
    ]
);
```



### Как сделать список

Например, список товаров.

Подробнее смотри в `16. Списки на сайте.md`



### Как сделать минишаблон для типа страниц

Например, когда вы хотите сделать карточку товара. И структура страниц остается как на других страницах сайта. А меняется только содержимое страницы.

Подробнее смотри в `14. Один элемент (сущность)`