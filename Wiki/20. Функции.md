# Типовые функции

Здесь описаны самые основные функции. Но вы можете посмотреть их более подробно в файле `inc/functions.php`

## Объекты

#### Получить объект по классу

Бывают ситуации, когда для одного и того же объекта (например, товара) создаются несколько объектов.

Это чревато тем, что в одном объекте можно поменять и сохранить что-то одно. А в другом другое.

Это как открыть один и тот же текстовый файл в разных программах. И сначала поменять что-то в одной программе и сохранить. А потом во второй. В этом случае изменения второй программы затрут изменения первой.

Для того, чтобы вы могли избежать подобных ситуаций, вы можете получать объекты с помощью функции `wdpro_object`. Которая создает только один объект.

```php
$catalogEntity = wdpro_object(
	Entity::class,
    23
);
```



#### Объект страницы по ID

Вы можете получить объект страницы `Wdpro\BasePage` следующим образом:

```php
$page = wdpro_object_by_post_id(32);
```

У всех страниц в вордпресс свой уникальный ID, поэтому достаточно указать его. И вы получаете страницу любого типа.



#### Объект страницы по адресу

```php
$page = wdpro_get_post_by_name('contacts');
```



## Адреса страниц

#### Текущий адрес страницы с заменой параметров в QUERY_STRING

Возвращает текущий uri страницы. Можно отправить массив с параметрами query string. Которые нужно поменять (или добавить).

```php
$newUrl = wdpro_current_uri([
    'id' => 12,
]);
// page_uri/?id=12
```

Точно такая же функция есть для url:

```php
$newUrl = wdpro_current_url([
    'id' => 12,
]);
// https://site.ru/page_uri/?id=12
```



#### Совпадение с текущим адресом

```php
// Если адрес страницы "catalog"
if (wdpro_is_current_post_name('calalog')) {
    //...
}
```



#### Проверка на класс текущей страницы

```php
// Если текущая страница является экземпляром класса Entity
if (wdpro_is_current_post_type(Entity::getType())) {
	// ...
}
```



## Даты

Все даты в wordpressmvc хранятся в формате time(). 

```php
$dateText = wdpro_date(time(), [

	// Отображать год
    'year'=>false,
    
    // Отображать слово "Сегодня"
    'today'=>true,
    
    // Отображать время
    'time'=>false,

	// Формат даты
    'dateFormat'=>'d Month Y',
    
    // Формат времени
    'timeFormat'=>', H:i',
]);
```



## Файлы

#### Рекурсивное копирование

```php
wdpro_copy(
    __DIR__.'/from',
    __DIR__.'/to'
);
```



#### Копирование файла

При необходимости создает папки.

```php
wdpro_copy_file(
	__DIR__.'/from.txt',
    __DIR__.'/to1/to2/to.txt'
);
```



## Глобальные данные

Можно сохранять данные, например, чтобы потом их использовать в шаблонах.

Сохранить данные:

```php
wdpro_data('h1', 'Заголовок страницы');
```

Использовать данные:

```php
<?= wdpro_data('h1') ?>
```



